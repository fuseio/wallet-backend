{
	"info": {
		"_postman_id": "6935d01f-a459-4ec0-b555-e7ff7a0343fb",
		"name": "Voltage Backend",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "2330427"
	},
	"item": [
		{
			"name": "Auth",
			"item": [
				{
					"name": "Login",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"const firebaseApiKey = pm.environment.get(\"firebaseAPIKey\");",
									"const firebaseUserEmail = pm.environment.get(\"firebaseUserEmail\");",
									"const firebaseUserPassword = pm.environment.get(\"firebaseUserPassword\");",
									"",
									"pm.sendRequest({",
									"    url: \"https://www.googleapis.com/identitytoolkit/v3/relyingparty/verifyPassword?key=\" + firebaseApiKey,",
									"    method: \"POST\",",
									"    header: {",
									"        \"Content-Type\": \"application/json\",",
									"    },",
									"    body: {",
									"        mode: \"raw\",",
									"        raw: JSON.stringify({",
									"            email: firebaseUserEmail,",
									"            password: firebaseUserPassword,",
									"            returnSecureToken: true,",
									"        }),",
									"    },",
									"}, function (err, res) {",
									"    if (err) {",
									"        console.log(err);",
									"    } else {",
									"        const firebaseIDToken = res.json().idToken;",
									"        console.log(\"firebaseIDToken: \", firebaseIDToken);",
									"        pm.environment.set(\"firebaseIDToken\", firebaseIDToken);",
									"    }",
									"});",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"const jwt = pm.response.text();",
									"pm.environment.set(\"jwt\", jwt)"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"firebaseIDToken\": \"{{firebaseIDToken}}\",\n    \"walletAddress\": \"0x302CB015D4CB5c8F73AbcBA22C4E55794926f6b8\",\n    \"phoneNumber\": \"+905433723255\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseURL}}/auth/login",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"auth",
								"login"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "User",
			"item": [
				{
					"name": "Ramp webhook",
					"item": [
						{
							"name": "Test \"CREATED\" Webhook",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"CREATED\",\n  \"purchase\": {\n    \"endTime\": \"2023-07-11T18:30:12.445Z\",\n    \"cryptoAmount\": \"5000000000000000000\",\n    \"fiatCurrency\": \"EUR\",\n    \"fiatValue\": 4.62,\n    \"assetExchangeRateEur\": 0.9126814247696738,\n    \"fiatExchangeRateEur\": 1,\n    \"baseRampFee\": 0.04563407123848369,\n    \"networkFee\": 0.01,\n    \"appliedFee\": 0.05563407123848369,\n    \"createdAt\": \"2023-07-08T18:30:12.523Z\",\n    \"updatedAt\": \"2023-07-08T18:30:14.791Z\",\n    \"id\": \"s2doeg39d3gkphz\",\n    \"asset\": {\n      \"address\": \"0x249be57637d8b013ad64785404b24aebae9b098b\",\n      \"symbol\": \"FUSE_FUSD\",\n      \"apiV3Symbol\": \"FUSD\",\n      \"name\": \"fUSD token (Fuse network)\",\n      \"decimals\": 18,\n      \"type\": \"FUSE_ERC20\",\n      \"apiV3Type\": \"ERC20\",\n      \"chain\": \"FUSE\"\n    },\n    \"receiverAddress\": \"0xa2658694eae30cb1c17bb3616e2ac53f34e4be1e\",\n    \"assetExchangeRate\": 0.9126814247696738,\n    \"purchaseViewToken\": \"wnxp7ed37kxgd2oe\",\n    \"status\": \"INITIALIZED\",\n    \"paymentMethodType\": \"MANUAL_BANK_TRANSFER\"\n  }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseURL}}/user/webhooks/ramp",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"user",
										"webhooks",
										"ramp"
									]
								}
							},
							"response": []
						},
						{
							"name": "Test \"RELEASED\" Webhook",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"RELEASED\",\n  \"purchase\": {\n    \"endTime\": \"2023-07-11T18:30:12.445Z\",\n    \"cryptoAmount\": \"5000000000000000000\",\n    \"fiatCurrency\": \"EUR\",\n    \"fiatValue\": 4.62,\n    \"assetExchangeRateEur\": 0.9126814247696738,\n    \"fiatExchangeRateEur\": 1,\n    \"finalTxHash\": \"exampleTransactionHash\",\n    \"baseRampFee\": 0.04563407123848369,\n    \"networkFee\": 0.01,\n    \"appliedFee\": 0.05563407123848369,\n    \"createdAt\": \"2023-07-08T18:30:12.523Z\",\n    \"updatedAt\": \"2023-07-08T18:30:14.791Z\",\n    \"id\": \"s2doeg39d3gkphz\",\n    \"asset\": {\n      \"address\": \"0x249be57637d8b013ad64785404b24aebae9b098b\",\n      \"symbol\": \"FUSE_FUSD\",\n      \"apiV3Symbol\": \"FUSD\",\n      \"name\": \"fUSD token (Fuse network)\",\n      \"decimals\": 18,\n      \"type\": \"FUSE_ERC20\",\n      \"apiV3Type\": \"ERC20\",\n      \"chain\": \"FUSE\"\n    },\n    \"receiverAddress\": \"0xa2658694eae30cb1c17bb3616e2ac53f34e4be1e\",\n    \"assetExchangeRate\": 0.9126814247696738,\n    \"purchaseViewToken\": \"wnxp7ed37kxgd2oe\",\n    \"status\": \"INITIALIZED\",\n    \"paymentMethodType\": \"MANUAL_BANK_TRANSFER\"\n  }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseURL}}/user/webhooks/ramp",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"user",
										"webhooks",
										"ramp"
									]
								}
							},
							"response": []
						},
						{
							"name": "Test \"RETURNED\" Webhook",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"RETURNED\",\n  \"purchase\": {\n    \"endTime\": \"2023-07-11T18:30:12.445Z\",\n    \"cryptoAmount\": \"5000000000000000000\",\n    \"fiatCurrency\": \"EUR\",\n    \"fiatValue\": 4.62,\n    \"assetExchangeRateEur\": 0.9126814247696738,\n    \"fiatExchangeRateEur\": 1,\n    \"finalTxHash\": \"exampleTransactionHash\",\n    \"baseRampFee\": 0.04563407123848369,\n    \"networkFee\": 0.01,\n    \"appliedFee\": 0.05563407123848369,\n    \"createdAt\": \"2023-07-08T18:30:12.523Z\",\n    \"updatedAt\": \"2023-07-08T18:30:14.791Z\",\n    \"id\": \"s2doeg39d3gkphz\",\n    \"asset\": {\n      \"address\": \"0x249be57637d8b013ad64785404b24aebae9b098b\",\n      \"symbol\": \"FUSE_FUSD\",\n      \"apiV3Symbol\": \"FUSD\",\n      \"name\": \"fUSD token (Fuse network)\",\n      \"decimals\": 18,\n      \"type\": \"FUSE_ERC20\",\n      \"apiV3Type\": \"ERC20\",\n      \"chain\": \"FUSE\"\n    },\n    \"receiverAddress\": \"0xa2658694eae30cb1c17bb3616e2ac53f34e4be1e\",\n    \"assetExchangeRate\": 0.9126814247696738,\n    \"purchaseViewToken\": \"wnxp7ed37kxgd2oe\",\n    \"status\": \"INITIALIZED\",\n    \"paymentMethodType\": \"MANUAL_BANK_TRANSFER\"\n  }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseURL}}/user/webhooks/ramp",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"user",
										"webhooks",
										"ramp"
									]
								}
							},
							"response": []
						},
						{
							"name": "Test \"ERROR\" Webhook",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"type\": \"ERROR\",\n  \"purchase\": {\n    \"endTime\": \"2023-07-11T18:30:12.445Z\",\n    \"cryptoAmount\": \"5000000000000000000\",\n    \"fiatCurrency\": \"EUR\",\n    \"fiatValue\": 4.62,\n    \"assetExchangeRateEur\": 0.9126814247696738,\n    \"fiatExchangeRateEur\": 1,\n    \"finalTxHash\": \"exampleTransactionHash\",\n    \"baseRampFee\": 0.04563407123848369,\n    \"networkFee\": 0.01,\n    \"appliedFee\": 0.05563407123848369,\n    \"createdAt\": \"2023-07-08T18:30:12.523Z\",\n    \"updatedAt\": \"2023-07-08T18:30:14.791Z\",\n    \"id\": \"s2doeg39d3gkphz\",\n    \"asset\": {\n      \"address\": \"0x249be57637d8b013ad64785404b24aebae9b098b\",\n      \"symbol\": \"FUSE_FUSD\",\n      \"apiV3Symbol\": \"FUSD\",\n      \"name\": \"fUSD token (Fuse network)\",\n      \"decimals\": 18,\n      \"type\": \"FUSE_ERC20\",\n      \"apiV3Type\": \"ERC20\",\n      \"chain\": \"FUSE\"\n    },\n    \"receiverAddress\": \"0xa2658694eae30cb1c17bb3616e2ac53f34e4be1e\",\n    \"assetExchangeRate\": 0.9126814247696738,\n    \"purchaseViewToken\": \"wnxp7ed37kxgd2oe\",\n    \"status\": \"INITIALIZED\",\n    \"paymentMethodType\": \"MANUAL_BANK_TRANSFER\"\n  }\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{baseURL}}/user/webhooks/ramp",
									"host": [
										"{{baseURL}}"
									],
									"path": [
										"user",
										"webhooks",
										"ramp"
									]
								}
							},
							"response": []
						},
						{
							"name": "Release test purchase",
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "https://api.demo.ramp.network/api/widget/testing/purchase/sfej3n6wdnw4yga/release?secret=nor9e2t9uyxazp4g",
									"protocol": "https",
									"host": [
										"api",
										"demo",
										"ramp",
										"network"
									],
									"path": [
										"api",
										"widget",
										"testing",
										"purchase",
										"sfej3n6wdnw4yga",
										"release"
									],
									"query": [
										{
											"key": "secret",
											"value": "nor9e2t9uyxazp4g"
										}
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Get user",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY0MDYyNGFlOTMxMDRiYjQ4MDc2NzIwMSIsImlhdCI6MTY3ODEyOTY1NiwiZXhwIjoxNjgwNzIxNjU2fQ.PF5aheAYFwePJxQ09kHHqggDyorIP5thz82ttxMf4H4",
								"type": "text",
								"disabled": true
							}
						],
						"url": {
							"raw": "{{baseURL}}/user",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"user"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update user",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"displayName\": \"Samet Sahin\",\n    \"arbitraryKey\": \"Awesome\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseURL}}/user",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"user"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete user",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/user",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"user"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete FCM token",
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"fcmToken\": \"fFtHrh1ZSeuusM4sYq7DpD:APA91bHjCLFk2r9TP4exSyvQUdmufGFMKfpIAI_GPW4_7yOOeGkWwdzDqTUqZgHo5UcsjTpgC_LY4CMa8dhI5YwhEJmKWl-rypMiyVxB-PQI26b0AxNSBKV3X_ugc89VtTZwzQ3j01UB\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseURL}}/user/fcmToken",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"user",
								"fcmToken"
							]
						}
					},
					"response": []
				},
				{
					"name": "Transak Webhook",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{ \n     \"eventID\":\"ORDER_CREATED\",\n   \"createdAt\":\"2020-02-17T01:55:05.100Z\",\n   \"webhookData\":{ \n      \"id\":\"9151faa1-e69b-4a36-b959-3c4f894afb68\",\n      \"walletAddress\":\"0x86349020e9394b2BE1b1262531B0C3335fc32F20\",\n      \"createdAt\":\"2020-02-17T01:55:05.095Z\",\n      \"status\":\"AWAITING_PAYMENT_FROM_USER\",\n      \"fiatCurrency\":\"INR\",\n      \"userId\":\"65317131-cd95-419a-a50c-747d142f83e9\",\n      \"cryptocurrency\":\"CDAI\",\n      \"isBuyOrSell\":\"BUY\",\n      \"fiatAmount\":1110,\n      \"commissionDecimal\":0.0075,\n      \"fromWalletAddress\":\"0x085ee67132ec4297b85ed5d1b4c65424d36fda7d\",\n      \"walletLink\":\"https://rinkeby.etherscan.io/address/0x86349020e9394b2BE1b1262531B0C3335fc32F20#tokentxns\",\n      \"amountPaid\":0,\n      \"partnerOrderId\":\"2183721893\",\n      \"partnerCustomerId\":\"2183721893\",\n      \"redirectURL\":\"https://google.com\",\n      \"conversionPrice\":0.663847164368606,\n      \"cryptoAmount\":731.34,\n      \"totalFee\":5.52652764336864,\n      \"paymentOption\":[],\n      \"autoExpiresAt\":\"2020-02-16T19:55:05-07:00\",\n      \"referenceCode\":226056\n   }\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseURL}}/user/webhooks/transak",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"user",
								"webhooks",
								"transak"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Health",
			"item": [
				{
					"name": "Check health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/health",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"health"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Referral",
			"item": [
				{
					"name": "Get referrals",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseURL}}/referral",
							"host": [
								"{{baseURL}}"
							],
							"path": [
								"referral"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{jwt}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseURL",
			"value": "https://api-staging.voltage.finance"
		}
	]
}